{% extends 'shop/base.html' %}
{% load static %}
{% block title %}{{product.name}}{% endblock %}
{% block content %}
<div class="mb-5" style="margin-left: auto; margin-right: auto;">
<div class="card mb-3 mt-4" style="max-width: 1000px;">
    <div class="row g-0">
      <div class="col-md-4">
        {% if product.image %}
        <img src="{{product.image.url}}" class="img-fluid rounded-start mt-4 mb-3" alt="product image">
        {% else %}
        <img src="{% static 'shop/img/default-image.png' %}" class="img-fluid rounded-start mt-4 mb-3" alt="product image">
        {% endif %}
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h3 class="card-title mt-2">{{product.name}}</h3>
          <h4 class="card-title">{{product.price}}</h4>
          <p class="card-text" style="color: grey;">{{product.description}}</p>
          <p class="card-text"><small class="text-muted">{{product.stock}}</small></p>
        </div>
      </div>
      <a href="{% url 'shop:update-product-url' product.slug %}" class="btn btn-primary">Update</a>
      <a href="{% url 'shop:delete-product-url' product.slug %}" class="btn btn-danger">Delete</a>
    </div>
  </div>

  <h2 class="mt-4">Comments</h2>
  <form action="{{product.get_absolute_url}}" method="post">
    {% csrf_token %}
    <div class="form-floating">
      <textarea class="form-control" placeholder="Leave a comment here" name="comment" id="floatingTextarea2" style="height: 100px"></textarea>
      <label for="floatingTextarea2">Comments</label>
      <button class="btn btn-primary mt-2" style="float: right;">Add</button>
    </div>
  </form>

  {% for comment in product.comments.all %}
  {% if comment %}
  <div class="card" style="margin-top: 60px;">
    <h5 class="card-header">User</h5>
    <div class="card-body">
      <p class="card-text">{{comment.title}}</p>
        <a href="{% url 'shop:update-comment-url' comment.slug %}" class="btn btn-primary">Edit</a>
        <a href="{% url 'shop:delete-comment-url' comment.slug %}" class="btn btn-primary">Delete</a>
    </div>
    <h6 class="card-header" style="color: grey;">{{comment.created_at}}</h6>

  </div>
  {% endif %}
{% endfor %}

</div>
{% endblock %}